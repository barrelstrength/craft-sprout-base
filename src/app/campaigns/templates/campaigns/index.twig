{% extends "sprout-base-email/_layouts/elementindex" %}
{% set title = "Campaign Email"|t('sprout') %}
{% set elementType = 'barrelstrength\\sproutbase\\app\\campaigns\\elements\\CampaignEmail' %}

{% set sproutBaseApp = craft.app.getModule('sprout').app %}

{% set campaignTypes = sproutBaseApp.campaignTypes.getCampaignTypes() %}

{% block actionButton %}

    <div class="buttons">
        <div class="btngroup submit">

            {% if campaignTypes|length %}

                <div class="btn submit menubtn add icon">{{ "New Campaign"|t('sprout') }}</div>
                <div class="menu">
                    <ul>
                        {% for campaignType in campaignTypes %}
                            <li>
                                <a href="{{ url('sprout/campaigns/' ~ campaignType.id ~ '/new') }}">{{ campaignType.name|t('sprout') }}</a>
                            </li>
                        {% endfor %}
                    </ul>
                </div>

            {% else %}

                <a class="btn submit add icon"
                    href="{{ url('sprout/settings/campaigns/campaign-types/edit/new') }}">{{ "New Campaign Type"|t('sprout') }}</a>

            {% endif %}
        </div>
    </div>
{% endblock %}

{% block content %}

    {{ parent() }}

    {% include "sprout-base-email/_modals/base" %}

{% endblock %}