{% requireAdmin %}

{% import "_includes/forms" as forms %}
{% import "sprout/fields/_includes/forms" as sproutFields %}

{% macro configWarning(setting) -%}
    {{ "This is being overridden by the {setting} config setting."|t('sprout-forms-google-recaptcha', {
        setting: setting
    })|raw }}
{%- endmacro %}

{% from _self import configWarning %}

{% set pluginsService = craft.app.getPlugins() %}

{% set cpSettings = create('barrelstrength\\sproutbase\\config\\models\\settings\\ControlPanelSettings') %}

{{ forms.editableTableField({
    label: "Sprout Modules"|t('sprout'),
    instructions: "Sprout plugins are composed of one or more modules. Choose the Sprout modules to enable and what they should be named."|t('sprout'),
    id: 'modules',
    name: 'modules',
    cols: {
        heading: {
            type: 'heading',
            heading: "Display Name"|t('sprout'),
            thin: true,
            info: 'Customize the Sprout features that are available and enabled. Additional access and permissions can be managed with Craft User Groups and permissions. Disabled features will only display here, and will no longer display in the control panel navigation and settings areas.'
        },
        enabled: {
            type: 'heading',
            thin: true
        },
        alternateName: {
            type: 'singleline',
            heading: "Alternate Name"|t('sprout'),
            info: "Alternate name that will be used to display this module in Control Panel navigation."|t('sprout')
        },
    }|filter,
    rows: cpSettingsRows,
    fullWidth: true,
    staticRows: true,
    errors: []|unique
}) }}

{{ forms.lightswitchField({
    label: "Disable Upgrade to Pro Messaging"|t('sprout'),
    instructions: "Sprout plugins will display upgrade notices throughout the interface where features can be improved by updating to Pro. This can be handy when getting familiar with a plugin and can be disabled when you'd prefer to no longer see the reminders."|t('sprout'),
    name: 'disableUpgradeMessages',
    on: settings.disableUpgradeMessages,
    onLabel: "Enable"|t('sprout'),
    warning: config.disableUpgradeMessages is defined ? configWarning('disableUpgradeMessages')
}) }}
