{% extends "sprout/forms/_layouts/formsettings" %}
{% import "_includes/forms" as forms %}
{% import "sprout/fields/_includes/forms" as sproutFields %}

{% set fullPageForm = true %}

{% set content %}

    <input type="hidden" name="action" value="sprout/forms/save-form">
    {{ redirectInput('sprout/forms/edit/'~form.id~'/settings/general') }}
    <input type="hidden" id="formId" name="formId" value="{{ form.id }}">

    {{ forms.textField({
        first: true,
        label: "Name"|t('sprout'),
        instructions: "What this form will be called in the CP."|t('sprout'),
        id: 'name',
        name: 'name',
        value: form.name,
        errors: form.getErrors('name'),
        autofocus: true,
        required: true
    }) }}

    {{ forms.textField({
        label: "Handle"|t('sprout'),
        instructions: "How youâ€™ll refer to this form in the templates."|t('sprout'),
        id: 'handle',
        class: 'code',
        name: 'handle',
        value: form.handle,
        errors: form.getErrors('handle'),
        required: true
    }) }}

    {{ forms.textField({
        label: "Title Format"|t('sprout'),
        instructions: "Entry Titles are auto-generated based on the Title Format you enter here. All information contained in the Title will also be searchable. You may use the same syntax here as you would with Dynamic Titles in your Sections. (i.e. {dateCreated|date('Ymd')} {fullName})"|t('sprout'),
        id: 'titleFormat',
        name: 'titleFormat',
        value: form.titleFormat,
        errors: form.getErrors('titleFormat'),
        required: true
    }) }}

    {% if groups is defined and groups|length %}

        {% set groupOptions = [
            { label: 'All Forms'|t('sprout') , value: '*' }
        ] %}
        {% for group in groups %}
            {% set groupOptions = groupOptions|merge([{ label: group.name, value: group.id }]) %}
        {% endfor %}

        {{ forms.selectField({
            first: true,
            label: "Group"|t('sprout'),
            instructions: "Which group should this form be displayed in?"|t('sprout'),
            id: 'groupId',
            name: 'groupId',
            options: groupOptions,
            value: groupId
        }) }}

    {% endif %}

    <hr>

    {% if settings.enableSaveData %}

        {{ forms.lightswitchField({
            label: "Save Data"|t('sprout'),
            instructions: "Save submitted Sprout Form Entries for this form to the Craft database. Disabling this setting will not delete existing entries, but they will no longer be visible in the Control Panel."|t('sprout'),
            id: 'saveData',
            name: 'saveData',
            on: settings.enableSaveData ? form.saveData : false,
            onLabel: "Show"|t('sprout'),
            offLabel: "Hide"|t('sprout')
        }) }}

    {% endif %}

    {{ forms.textField({
        label: "Redirect Page"|t('sprout'),
        instructions: "Where should the user be redirected upon form submission? Leave blank to redirect user back to the form."|t('sprout'),
        name: 'redirectUri',
        placeholder: siteUrl,
        value: (form is defined ? form.redirectUri : null),
        errors: (form is defined ? form.getErrors('redirectUri') : null)
    }) }}

{% endset %}