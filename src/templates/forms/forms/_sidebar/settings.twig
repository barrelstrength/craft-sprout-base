{% import "_includes/forms" as forms %}
{% import "sprout/forms/_includes/formbuilder" as formBuilder %}
{% import "sprout/fields/_includes/forms" as sproutFields %}

{% set fieldTypes = sprout.forms.getRegisteredFields() %}
{% set fieldTypesByGroup = sprout.forms.getRegisteredFieldsByGroup() %}
{% set customFields =  sprout.forms.getCustomFields(fieldTypes, fieldTypesByGroup) %}

<div id="sproutforms-source-fields">
    <div id='right-copy'>
        {% for name,group in fieldTypesByGroup %}
            <h6 class="tab-title donotdrag">{{ name }}</h6>
            {% for type in group %}
                {% set field = fieldTypes[type] %}
                {{ formBuilder.field(field, 'source', null, loop.index) }}
            {% endfor %}
        {% endfor %}

        {% if customFields %}
            <h6 class="tab-title donotdrag">{{ 'Custom Fields'|t('sprout') }}</h6>
            {% for field in customFields %}
                {{ formBuilder.field(field, 'source', null, loop.index) }}
            {% endfor %}
        {% endif %}
    </div>
</div>
