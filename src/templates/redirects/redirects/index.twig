{% extends "sprout/_layouts/elementindex" %}
{% import "sprout/_includes/sproutcp" as sproutCp %}

{% set elementType = 'barrelstrength\\sproutbase\\app\\redirects\\elements\\Redirect' %}
{% set title = "Redirects" %}
{% set bodyClass = 'sprout-redirects-index' %}

{% do view.registerAssetBundle("barrelstrength\\sproutbase\\web\\assetbundles\\sproutcp\\SproutCpAsset") %}
{% do view.registerAssetBundle("barrelstrength\\sproutbase\\web\\assetbundles\\redirects\\RedirectsAsset") %}

{% block actionButton %}
    <div class="buttons">
        <a class="btn submit add icon {% if not config.getIsPro() and canCreateRedirects %}sprout-disabled{% endif %}" id="sprout-base-redirects-new-button" href="{{ url('sprout/redirects/new/' ~ currentSite.handle) }}">{{ "New Redirect"|t }}</a>

        {% if config.getEnableUpgradeMessages() and config.isUpgradable() %}
            {{ sproutCp.upgradeToProButton({
                url: config.getUpgradeUrl(),
                title: config.getUpgradeMessage()
            }) }}
        {% endif %}
    </div>
{% endblock %}

{% css %}
    .element.small.hasstatus
    {
    word-break: break-all;
    hyphens: auto;
    }
{% endcss %}

{% js %}
    {% if not config.getIsPro() and canCreateRedirects %}
        $('#sprout-base-redirects-new-button').click(function(e){
        e.preventDefault();
        })
    {% endif %}
{% endjs %}

{% block initJs %}

    {{ parent() }}

    new RedirectEditLinkSwitcher();
{% endblock %}
